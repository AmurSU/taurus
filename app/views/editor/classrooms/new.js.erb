jQuery(document).ready(function($){
    $('#form').replaceWith('<%= escape_javascript render :partial => 'new' %>');
    $('#form').fadeIn('fast', function(){
        $('#classroom_name').focus();
    });

    
    $.getJSON('/editor/classrooms.json', {except: '<%= escape_javascript @classrooms.join(',') %>'}, function(data) {
        var classrooms = new Array(0);
        data.each(function(i) {
            classrooms.push({ label: i.classroom.name + ' (' + i.classroom.building.name + ')', value: i.classroom.id });
        });

        $('#classroom_name').autocomplete({
            source: classrooms,
            select: function(event, ui) {
                $.get('/editor/classrooms/' + ui.item.value, "script");
            }
        });
    });
});