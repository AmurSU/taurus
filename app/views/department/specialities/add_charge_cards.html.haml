%h1 Создание карт нагрузок для групп направления подготовки #{@speciality.code} «#{@speciality.name}»
= form_tag({:action => :create_charge_cards}, :method => :post) do
  %p Данное действие автоматически создаст карты нагрузки, согласно учебному плану специальности, загруженному в систему.
  %p Карты нагрузки будут созданы на <strong>#{current_semester}</strong>. Сменить текущий семестр вы можете в верхнем меню.
  %p Полученные карты нагрузки будут иметь незаполненное поле «Преподаватель». Часы будут выставлены согласно учебному плану, исходя из 18-недельного семестра. Лекционные занятия будут включать в себя все группы специальности. Практические и лабораторные работы будут созданы для каждой группы отдельно.
  %p
    = check_box_tag :remove, true
    = label_tag :remove, raw("<strong>ОПАСНО!</strong> Удалить старые карты нагрузки? Если этот флаг установлен, предварительно будут удалены все карты нагрузок для групп данного направления подготовки. Будет удалено карт нагрузок: #{@cards_to_remove}")
  %p
    = submit_tag "Создать"

%p Будут созданы следующие карты нагрузки:
%table.infotable.fullwidth-table
  %thead
    %tr
      %th Дисциплина
      %th Тип занятия
      %th Всего часов
      %th Количество недель
      %th Часов в неделю
      %th Группы
  %tbody
    - @cards_to_create.each do |card|
      %tr
        %td= card.discipline.name
        %td= card.lesson_type.name
        %td= card.hours_quantity
        %td= card.weeks_quantity
        %td= card.hours_per_week
        %td= card.groups.map{|g| g.name}.join ", "
